# MTCompiler_TS
`TypeScript` version of `MTCompiler` project.

## 概要
`MTScript`をコンパイルする`MTCompiler`の`TypeScript`版です。

## ビルド方法
`npm install`で依存パッケージをインストールし、`npm run tsc`でビルドします。

## 使い方
ﾁｮｯﾄﾜｶﾝﾅｲﾖｰ...

`Compiler`クラスに`MTScript`のソースコードを渡して`compile`メソッドを呼び出すと、コンパイルされたコードが返ってきます。

## 旧コンパイラ(JS/PY版)との違い
- そもそも`TypeScript`で書き直した
- `include`処理が未実装
- `$[command]`の形で書く、拡張命令を実装
- `$include`命令を拡張命令として変更
- `$python`/`$renpy`/`$inpy`を拡張命令として実装
- ナレーターメッセージが句読点で終わらない場合に警告を表示
- 会話に鍵かっこを残すように変更

### 拡張命令
`$[command]`の形で書く、拡張命令を実装しました。

#### `$include path`
`$include`命令を拡張命令として変更しました。

`$include`命令は、`MTScript`のソースコードを読み込みます。

`$include path`命令の引数には、読み込むファイルのパスを指定します。  
（JS/PY版と異なり、`path`を`<>`で囲う必要がなくなりました。）

#### `$python`
これは、その行より下に書かれるコードが、Ren'Pyファイルに書かれるPythonであると明示的に指定するための命令です。  
仕様としては、`python:`と加わり、常にインデントが1つ深くなり、`$endpy`命令が現れるまでコードは一切コンパイルされません。

明示的に指定されたPythonコードは、`$endpy`命令が現れるまで続きます。

#### `$renpy`
これは、その行より下に書かれるコードが、Ren'Pyファイルに書かれるRen'Pyコードであると明示的に指定するための命令です。  
仕様としては、通常1つあるインデントがなくなり、`$endrenpy`命令が現れるまでコードは一切コンパイルされません。

明示的に指定されたRen'Pyコードは、`$endrenpy`命令が現れるまで続きます。

#### `$inpy`
これは、その行より下に書かれるコードが、Ren'Pyファイルの`label`や`style`、`screen`ステートメントに書かれるPythonであると明示的に指定するための命令です。  
仕様としては、`python:`と加わり、常にインデントが2つ深くなり、`$endinpy`命令が現れるまでコードは一切コンパイルされません。

明示的に指定されたPythonコードは、`$endinpy`命令が現れるまで続きます。
